# HTTP
HTTP_PORT=8080
TRUST_PROXY=true
BODY_LIMIT=20mb

# Storage
# Local path where uploaded media will be stored (relative to service root)
MEDIA_ROOT=./data
STORAGE_WARN_PERCENT=80
STORAGE_CRITICAL_PERCENT=90
TEMP_MEDIA_TTL_HOURS=24
CACHE_IMMUTABLE_MAX_AGE=31536000

# Image sizing
THUMB_MAX=320
PREVIEW_MAX=1280
JPEG_QUALITY=82

# Limits
MAX_FILE_BYTES=15728640
MAX_PIXELS=12000000
ALT_MAX_LEN=512
TAGS_MAX=32
TAG_MAX_LEN=64

# Moderation (OpenAI)
# Enable/disable automatic image moderation
MODERATION_ENABLED=true
# Request timeout for the moderation API in milliseconds
MODERATION_TIMEOUT_MS=3000
# Moderation model (default: omni-moderation-latest)
MODERATION_MODEL=omni-moderation-latest
MODERATION_FAIL_OPEN=false
MODERATION_RESIZE_MAX_PIXELS=1000000
MODERATION_RESIZE_MAX_WIDTH=1280
MODERATION_RESIZE_MAX_HEIGHT=1280
MODERATION_RESIZE_JPEG_QUALITY=80
# OpenAI API key (use secrets in production)
OPENAI_API_KEY=your-openai-api-key-here

# Antivirus
AV_ENABLED=false

## AuthZ / Audit
HOSTNAME=localhost
AUTHZ_SERVICE_PORT=8081
AUDIT_LOG_SERVICE_PORT=8082
AUTHZ_BASE_URL=http://authz-service:8080
AUDIT_BASE_URL=http://audit-log-service:8080
AUTHZ_TIMEOUT_MS=1500
AUTHZ_RETRIES=2
AUDIT_TIMEOUT_MS=1500
AUDIT_RETRIES=2
# Circuit breaker overrides (optional)

AUTHZ_BREAKER_FAILURES=5
AUTHZ_BREAKER_HALF_OPEN_MS=10000
AUDIT_BREAKER_FAILURES=5
AUDIT_BREAKER_HALF_OPEN_MS=10000

# Audit Kafka publishing (optional)
AUDIT_KAFKA_ENABLED=true
AUDIT_KAFKA_BROKERS=kafka:9092
AUDIT_KAFKA_TOPIC=audit_logs
AUDIT_KAFKA_CLIENT_ID=media-service
AUDIT_KAFKA_ACKS=-1
AUDIT_KAFKA_CONNECTION_TIMEOUT_MS=3000
AUDIT_KAFKA_REQUEST_TIMEOUT_MS=5000
AUDIT_KAFKA_SEND_TIMEOUT_MS=5000
AUDIT_KAFKA_RETRIES=3
AUDIT_KAFKA_IDEMPOTENT=true

## Garbage Collector (optional)
GC_ENABLED=true
GC_INTERVAL_MS=60000
GC_DELETE_AFTER_DAYS=30
GC_BATCH_LIMIT=100

## Censoring defaults
CENSOR_DEFAULT_STRENGTH=16
CENSOR_MIN_STRENGTH=2
CENSOR_MAX_STRENGTH=128

## Database
DATABASE_URL=postgres://risk-radar-admin:password@localhost:5432/risk-radar?sslmode=disable
